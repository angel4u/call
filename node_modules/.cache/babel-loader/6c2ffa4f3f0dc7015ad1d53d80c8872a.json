{"ast":null,"code":"var _jsxFileName = \"/root/twilio-phone-client/src/components/MsgComposer.js\";\nimport React, { Component } from 'react';\nimport styled, { keyframes, css } from 'styled-components';\nimport chroma from 'chroma-js';\nimport { formParams } from '../lib/common';\nconst textAreaMaxHeight = 82; // px\n\nconst msgOutboundUrl = (process.env.REACT_APP_RUNTIME_DOMAIN ? process.env.REACT_APP_RUNTIME_DOMAIN : '') + '/msgOutbound';\nconst hover_accent = chroma(process.env.REACT_APP_ACCENT_COLOR).darken().hex();\nexport default class MsgComposer extends Component {\n  constructor(props) {\n    super(props);\n\n    this.handleChange = e => {\n      this.setState({\n        msgText: e.target.value\n      });\n      this.resizeTextArea(e.target);\n    };\n\n    this.handleKeyDown = e => {\n      if (e.keyCode === 13) {\n        // Enter\n        if (e.shiftKey) {\n          this.resizeTextArea(e.target);\n        } else {\n          e.preventDefault();\n          e.stopPropagation();\n          this.handleSend();\n        }\n      }\n    };\n\n    this.handleSend = () => {\n      this.setState({\n        sending: true\n      });\n      const contact = this.props.selectedContact;\n      let toNumber = contact;\n\n      if (contact === 'new') {\n        toNumber = this.normalizePhoneNumber(this.props.newPhoneNumber);\n      }\n\n      const body = formParams({\n        to: toNumber,\n        body: this.state.msgText,\n        secret: this.props.secret\n      });\n      fetch(msgOutboundUrl, {\n        method: 'POST',\n        headers: {\n          'Content-Type': 'application/x-www-form-urlencoded'\n        },\n        body\n      }).then(async response => {\n        if (response.status === 200) {\n          this.setState({\n            msgText: '',\n            sending: false,\n            error: null\n          });\n\n          if (contact === 'new') {\n            this.props.updateNewPhoneNumber('');\n            this.props.selectContact(toNumber);\n          }\n\n          this.resizeTextArea(this.msgTextRef.current);\n        } else {\n          const errText = await response.text();\n          console.error(response.status, errText);\n          this.setState({\n            sending: false,\n            error: errText\n          });\n        }\n      }).catch(err => {\n        this.setState({\n          sending: false,\n          error: 'Backend err:' + err\n        });\n        console.error('Error while sending message:', err);\n      });\n    };\n\n    this.state = {\n      msgText: '',\n      sending: false,\n      error: null\n    };\n    this.msgTextRef = React.createRef();\n  }\n\n  resizeTextArea(textArea) {\n    textArea.style.height = 'inherit';\n    textArea.style.height = `${Math.min(textArea.scrollHeight, textAreaMaxHeight)}px`;\n    textArea.focus();\n  }\n\n  normalizePhoneNumber(phoneNumber) {\n    return phoneNumber.replace(/[()\\- ]/g, '');\n  }\n\n  render() {\n    return [this.state.error ? /*#__PURE__*/React.createElement(Error, {\n      key: \"error\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(ErrorText, {\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 101,\n        columnNumber: 11\n      }\n    }, this.state.error)) : null, /*#__PURE__*/React.createElement(Container, {\n      key: \"msgComposer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 104,\n        columnNumber: 7\n      }\n    }, /*#__PURE__*/React.createElement(TextAreaContainer, {\n      key: \"txtAreaContainer\",\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 105,\n        columnNumber: 9\n      }\n    }, /*#__PURE__*/React.createElement(TextArea, {\n      rows: \"1\",\n      autoFocus: true,\n      placeholder: \"Type message\",\n      ref: this.msgTextRef,\n      value: this.state.msgText,\n      onChange: this.handleChange,\n      onKeyDown: this.handleKeyDown,\n      disabled: this.state.sending,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 106,\n        columnNumber: 11\n      }\n    })), /*#__PURE__*/React.createElement(BtnSend, {\n      key: \"btnSend\",\n      disabled: this.state.msgText === '' || this.state.sending,\n      sending: this.state.sending,\n      onClick: this.handleSend,\n      __self: this,\n      __source: {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 9\n      }\n    }, IcoSend))];\n  }\n\n}\nconst Container = styled.div`\n  flex-grow: 1;\n  flex-shrink: 0;\n\n  min-height: 2.5em;\n  max-height: 85px;\n  color: rgb(34, 34, 34);\n  position: relative;\n  overflow-x: hidden;\n\n  display: flex;\n  flex-wrap: nowrap;\n  -webkit-box-flex: 0;\n  flex-direction: row;\n  background: #ffffff;\n  padding-top: 8px;\n  padding-bottom: 12px;\n  margin-left: 12px;\n  margin-right: 12px;\n`;\nconst TextAreaContainer = styled.div`\n  display: flex;\n  align-self: flex-end;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  flex-grow: 1;\n  flex-shrink: 1;\n  width: 100vw;\n  box-sizing: border-box;\n  color: rgb(34, 34, 34);\n  overflow: hidden;\n  background: rgb(236, 237, 241);\n  border-radius: 18px;\n`;\nconst TextArea = styled.textarea`\n  font-size: 12px;\n  display: block;\n  width: 100vw;\n  resize: none;\n  box-sizing: border-box;\n  padding-left: 12px;\n  padding-right: 12px;\n  padding-top: 6px;\n  padding-bottom: 6px;\n  overflow-x: hidden;\n  overflow-y: auto;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',\n    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',\n    sans-serif;\n  color: ${props => props.disabled ? '#94979B' : 'rgb(34, 34, 34)'};\n  border-width: 0px;\n  border-style: initial;\n  border-color: initial;\n  border-image: initial;\n  outline: none;\n  background: rgb(236, 237, 241);\n`;\nconst flash = keyframes`\n    0% { opacity: 0.25; }\n   50% { opacity: 0.50; }\n  100% { opacity: 0.25; }\n`;\nconst BtnSend = styled.button`\n  flex-grow: 0;\n  flex-shrink: 0;\n  align-self: flex-end;\n  width: 36px;\n  height: 36px;\n  color: rgb(255, 255, 255);\n  padding: 0px;\n  border-width: initial;\n  border-style: none;\n  border-color: initial;\n  border-image: initial;\n  outline: none;\n  border-radius: 100px;\n  background: ${process.env.REACT_APP_ACCENT_COLOR};\n  margin-left: 8px;\n  ${props => props.disabled ? `\n    opacity: 0.5;\n    cursor: default;\n    ` : `\n    opacity: 1;\n    cursor: pointer;\n    &:hover { background: ${hover_accent}; }\n    `}\n  animation: ${props => props.sending ? css`\n          ${flash} 1s ease-in-out infinite\n        ` : ''};\n`;\nconst Error = styled.div`\n  text-align: center;\n  padding: 2px;\n  margin: 0;\n`;\nconst ErrorText = styled.div`\n  padding: 3px 20px 3px 20px;\n  margin:0;\n  display: inline-block\n  background: #fbcbd0;\n  color: #F22F46;\n  border-radius: 9px;\n  font-weight: 400;\n`;\nconst IcoSend = /*#__PURE__*/React.createElement(\"svg\", {\n  width: \"24px\",\n  height: \"24px\",\n  className: \"Twilio-Icon-Content\",\n  viewBox: \"0 0 24 24\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 248,\n    columnNumber: 3\n  }\n}, /*#__PURE__*/React.createElement(\"path\", {\n  fill: \"currentColor\",\n  fillRule: \"evenodd\",\n  d: \"M19.641 4c.164 0 .27.064.317.193.047.13.023.305-.07.528l-7.19 16.77a.761.761 0 01-.237.36.501.501 0 01-.308.114.494.494 0 01-.281-.097.989.989 0 01-.264-.29L8.76 16.92a4.609 4.609 0 00-.73-.905 5.269 5.269 0 00-.904-.747L2.38 12.314c-.27-.175-.396-.372-.378-.588.017-.217.172-.39.465-.519l16.788-7.12c.07-.023.137-.043.202-.06A.701.701 0 0119.64 4zM7.723 14.266c.117.07.238.155.36.255.124.1.25.208.379.325l8.314-8.455-12.902 5.484 3.85 2.39zm4.342 5.818l5.52-12.92-8.332 8.473c.105.117.202.234.29.351.088.117.16.235.22.352l2.302 3.744z\",\n  __self: this,\n  __source: {\n    fileName: _jsxFileName,\n    lineNumber: 254,\n    columnNumber: 5\n  }\n}));","map":{"version":3,"sources":["/root/twilio-phone-client/src/components/MsgComposer.js"],"names":["React","Component","styled","keyframes","css","chroma","formParams","textAreaMaxHeight","msgOutboundUrl","process","env","REACT_APP_RUNTIME_DOMAIN","hover_accent","REACT_APP_ACCENT_COLOR","darken","hex","MsgComposer","constructor","props","handleChange","e","setState","msgText","target","value","resizeTextArea","handleKeyDown","keyCode","shiftKey","preventDefault","stopPropagation","handleSend","sending","contact","selectedContact","toNumber","normalizePhoneNumber","newPhoneNumber","body","to","state","secret","fetch","method","headers","then","response","status","error","updateNewPhoneNumber","selectContact","msgTextRef","current","errText","text","console","catch","err","createRef","textArea","style","height","Math","min","scrollHeight","focus","phoneNumber","replace","render","IcoSend","Container","div","TextAreaContainer","TextArea","textarea","disabled","flash","BtnSend","button","Error","ErrorText"],"mappings":"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","sourcesContent":["import React, { Component } from 'react';\nimport styled, { keyframes, css } from 'styled-components';\nimport chroma from 'chroma-js';\nimport { formParams } from '../lib/common';\n\nconst textAreaMaxHeight = 82; // px\nconst msgOutboundUrl =\n  (process.env.REACT_APP_RUNTIME_DOMAIN\n    ? process.env.REACT_APP_RUNTIME_DOMAIN\n    : '') + '/msgOutbound';\n\nconst hover_accent = chroma(process.env.REACT_APP_ACCENT_COLOR).darken().hex();\n\nexport default class MsgComposer extends Component {\n  constructor(props) {\n    super(props);\n    this.state = {\n      msgText: '',\n      sending: false,\n      error: null\n    };\n    this.msgTextRef = React.createRef();\n  }\n\n  resizeTextArea(textArea) {\n    textArea.style.height = 'inherit';\n    textArea.style.height = `${Math.min(\n      textArea.scrollHeight,\n      textAreaMaxHeight\n    )}px`;\n    textArea.focus();\n  }\n\n  handleChange = (e) => {\n    this.setState({ msgText: e.target.value });\n    this.resizeTextArea(e.target);\n  };\n\n  handleKeyDown = (e) => {\n    if (e.keyCode === 13) {\n      // Enter\n      if (e.shiftKey) {\n        this.resizeTextArea(e.target);\n      } else {\n        e.preventDefault();\n        e.stopPropagation();\n        this.handleSend();\n      }\n    }\n  };\n\n  normalizePhoneNumber(phoneNumber) {\n    return phoneNumber.replace(/[()\\- ]/g, '');\n  }\n\n  handleSend = () => {\n    this.setState({ sending: true });\n\n    const contact = this.props.selectedContact;\n    let toNumber = contact;\n    if (contact === 'new') {\n      toNumber = this.normalizePhoneNumber(this.props.newPhoneNumber);\n    }\n    const body = formParams({\n      to: toNumber,\n      body: this.state.msgText,\n      secret: this.props.secret\n    });\n\n    fetch(msgOutboundUrl, {\n      method: 'POST',\n      headers: {\n        'Content-Type': 'application/x-www-form-urlencoded'\n      },\n      body\n    })\n      .then(async (response) => {\n        if (response.status === 200) {\n          this.setState({ msgText: '', sending: false, error: null });\n          if (contact === 'new') {\n            this.props.updateNewPhoneNumber('');\n            this.props.selectContact(toNumber);\n          }\n          this.resizeTextArea(this.msgTextRef.current);\n        } else {\n          const errText = await response.text();\n          console.error(response.status, errText);\n          this.setState({ sending: false, error: errText });\n        }\n      })\n      .catch((err) => {\n        this.setState({ sending: false, error: 'Backend err:' + err });\n        console.error('Error while sending message:', err);\n      });\n  };\n\n  render() {\n    return [\n      this.state.error ? (\n        <Error key=\"error\">\n          <ErrorText>{this.state.error}</ErrorText>\n        </Error>\n      ) : null,\n      <Container key=\"msgComposer\">\n        <TextAreaContainer key=\"txtAreaContainer\">\n          <TextArea\n            rows=\"1\"\n            autoFocus\n            placeholder=\"Type message\"\n            ref={this.msgTextRef}\n            value={this.state.msgText}\n            onChange={this.handleChange}\n            onKeyDown={this.handleKeyDown}\n            disabled={this.state.sending}\n          />\n        </TextAreaContainer>\n        <BtnSend\n          key=\"btnSend\"\n          disabled={this.state.msgText === '' || this.state.sending}\n          sending={this.state.sending}\n          onClick={this.handleSend}\n        >\n          {IcoSend}\n        </BtnSend>\n      </Container>\n    ];\n  }\n}\n\nconst Container = styled.div`\n  flex-grow: 1;\n  flex-shrink: 0;\n\n  min-height: 2.5em;\n  max-height: 85px;\n  color: rgb(34, 34, 34);\n  position: relative;\n  overflow-x: hidden;\n\n  display: flex;\n  flex-wrap: nowrap;\n  -webkit-box-flex: 0;\n  flex-direction: row;\n  background: #ffffff;\n  padding-top: 8px;\n  padding-bottom: 12px;\n  margin-left: 12px;\n  margin-right: 12px;\n`;\n\nconst TextAreaContainer = styled.div`\n  display: flex;\n  align-self: flex-end;\n  padding-top: 5px;\n  padding-bottom: 5px;\n  flex-grow: 1;\n  flex-shrink: 1;\n  width: 100vw;\n  box-sizing: border-box;\n  color: rgb(34, 34, 34);\n  overflow: hidden;\n  background: rgb(236, 237, 241);\n  border-radius: 18px;\n`;\n\nconst TextArea = styled.textarea`\n  font-size: 12px;\n  display: block;\n  width: 100vw;\n  resize: none;\n  box-sizing: border-box;\n  padding-left: 12px;\n  padding-right: 12px;\n  padding-top: 6px;\n  padding-bottom: 6px;\n  overflow-x: hidden;\n  overflow-y: auto;\n  font-family: -apple-system, BlinkMacSystemFont, 'Segoe UI', 'Roboto', 'Oxygen',\n    'Ubuntu', 'Cantarell', 'Fira Sans', 'Droid Sans', 'Helvetica Neue',\n    sans-serif;\n  color: ${(props) => (props.disabled ? '#94979B' : 'rgb(34, 34, 34)')};\n  border-width: 0px;\n  border-style: initial;\n  border-color: initial;\n  border-image: initial;\n  outline: none;\n  background: rgb(236, 237, 241);\n`;\n\nconst flash = keyframes`\n    0% { opacity: 0.25; }\n   50% { opacity: 0.50; }\n  100% { opacity: 0.25; }\n`;\n\nconst BtnSend = styled.button`\n  flex-grow: 0;\n  flex-shrink: 0;\n  align-self: flex-end;\n  width: 36px;\n  height: 36px;\n  color: rgb(255, 255, 255);\n  padding: 0px;\n  border-width: initial;\n  border-style: none;\n  border-color: initial;\n  border-image: initial;\n  outline: none;\n  border-radius: 100px;\n  background: ${process.env.REACT_APP_ACCENT_COLOR};\n  margin-left: 8px;\n  ${(props) =>\n    props.disabled\n      ? `\n    opacity: 0.5;\n    cursor: default;\n    `\n      : `\n    opacity: 1;\n    cursor: pointer;\n    &:hover { background: ${hover_accent}; }\n    `}\n  animation: ${(props) =>\n    props.sending\n      ? css`\n          ${flash} 1s ease-in-out infinite\n        `\n      : ''};\n`;\n\nconst Error = styled.div`\n  text-align: center;\n  padding: 2px;\n  margin: 0;\n`;\n\nconst ErrorText = styled.div`\n  padding: 3px 20px 3px 20px;\n  margin:0;\n  display: inline-block\n  background: #fbcbd0;\n  color: #F22F46;\n  border-radius: 9px;\n  font-weight: 400;\n`;\n\nconst IcoSend = (\n  <svg\n    width=\"24px\"\n    height=\"24px\"\n    className=\"Twilio-Icon-Content\"\n    viewBox=\"0 0 24 24\"\n  >\n    <path\n      fill=\"currentColor\"\n      fillRule=\"evenodd\"\n      d=\"M19.641 4c.164 0 .27.064.317.193.047.13.023.305-.07.528l-7.19 16.77a.761.761 0 01-.237.36.501.501 0 01-.308.114.494.494 0 01-.281-.097.989.989 0 01-.264-.29L8.76 16.92a4.609 4.609 0 00-.73-.905 5.269 5.269 0 00-.904-.747L2.38 12.314c-.27-.175-.396-.372-.378-.588.017-.217.172-.39.465-.519l16.788-7.12c.07-.023.137-.043.202-.06A.701.701 0 0119.64 4zM7.723 14.266c.117.07.238.155.36.255.124.1.25.208.379.325l8.314-8.455-12.902 5.484 3.85 2.39zm4.342 5.818l5.52-12.92-8.332 8.473c.105.117.202.234.29.351.088.117.16.235.22.352l2.302 3.744z\"\n    ></path>\n  </svg>\n);\n"]},"metadata":{},"sourceType":"module"}